<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>منظومة ليالي العرب UHD | السيرفر الخاص</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { background: #000; color: #eee; font-family: 'Cairo', sans-serif; overflow-x: hidden; }
        
        /* تأثير النيون الذهبي للمنظمة */
        .layali-glow { box-shadow: 0 0 20px rgba(212, 175, 55, 0.2); border: 1px solid rgba(212, 175, 55, 0.4); }
        .gold-text { color: #d4af37; text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
        
        /* تصميم الكروت المستوحى من UHDMovies */
        .uhd-card {
            position: relative; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #050505; border-radius: 8px; overflow: hidden;
        }
        .uhd-card:hover { transform: scale(1.03); z-index: 10; border-color: #d4af37; }
        .uhd-card img { width: 100%; height: 380px; object-fit: cover; filter: brightness(0.8); }
        .uhd-card:hover img { filter: brightness(1); }
        
        .badge { position: absolute; top: 10px; right: 10px; background: #d4af37; color: #000; padding: 2px 8px; font-size: 10px; font-weight: 900; border-radius: 4px; z-index: 5; }
        
        /* مشغل السينما */
        #cinema-overlay { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="cinema-overlay">
        <div class="absolute top-4 left-4 z-[10000] flex gap-4 items-center">
            <span class="bg-black/80 text-white px-4 py-2 rounded-lg text-xs border border-white/10 italic">سيرفر ليالي العرب: <span class="gold-text">4K UHD + SUBTITLE</span></span>
            <button onclick="killStream()" class="bg-red-600 text-white px-6 py-2 rounded-full font-black">إنهاء العرض ×</button>
        </div>
        <div id="stream-container" class="w-full h-full"></div>
    </div>

    <header class="p-6 bg-[#050505] border-b border-zinc-900 sticky top-0 z-50 backdrop-blur-md bg-opacity-90">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <i class="fas fa-microchip gold-text text-3xl animate-pulse"></i>
                <h1 class="text-3xl font-black tracking-tighter uppercase gold-text">Layali Arab <span class="text-white font-light">UHD</span></h1>
            </div>
            
            <div class="relative w-1/3">
                <input type="text" id="mainSearch" placeholder="ابحث عن الأفلام المرفوعة (بالإنجليزي)..." 
                       class="w-full bg-black border border-zinc-800 p-3 pr-12 rounded-xl text-sm outline-none focus:border-gold-text">
                <i class="fas fa-search absolute left-4 top-4 text-zinc-600"></i>
            </div>

            <div class="flex gap-4">
                <div class="text-left text-[10px] text-zinc-500 uppercase">System: <span class="text-green-500">Injecting Data...</span></div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-8">
        <div class="flex justify-between items-end mb-10">
            <div>
                <h2 class="text-3xl font-black">المرفوعات الأخيرة</h2>
                <p class="text-zinc-500 text-sm italic mt-1 font-mono">Scraping UHD Content - Proxy Active</p>
            </div>
            <div class="flex gap-2 bg-zinc-900 p-1 rounded-lg">
                <button onclick="fetchUHD('popular')" class="px-4 py-2 text-xs font-bold hover:bg-zinc-800 rounded-md">الكل</button>
                <button onclick="fetchUHD('top_rated')" class="px-4 py-2 text-xs font-bold hover:bg-zinc-800 rounded-md">أفلام 4K</button>
            </div>
        </div>

        <div id="uhd-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
            </div>
    </main>

    <script>
        const MASTER_KEY = '8d6d9194546435662aa063955619f697';
        const grid = document.getElementById('uhd-grid');

        async function fetchUHD(type = 'popular', query = '') {
            grid.innerHTML = '<div class="col-span-full text-center py-20 animate-pulse text-zinc-600">جاري سحب المحتوى من السيرفرات العالمية...</div>';
            
            let url = `https://api.themoviedb.org/3/movie/${type}?api_key=${MASTER_KEY}&language=ar-SA&page=1`;
            if(query) url = `https://api.themoviedb.org/3/search/movie?api_key=${MASTER_KEY}&query=${query}&language=ar-SA`;

            try {
                const res = await fetch(url);
                const data = await res.json();
                renderUHD(data.results);
            } catch (err) {
                grid.innerHTML = '<div class="col-span-full text-center py-20 text-red-900 font-black tracking-widest uppercase">Encryption Error: System Blocked</div>';
            }
        }

        function renderUHD(movies) {
            grid.innerHTML = '';
            movies.forEach(movie => {
                if(!movie.poster_path) return;
                const card = document.createElement('div');
                card.className = 'uhd-card layali-glow animate__animated animate__fadeIn';
                card.innerHTML = `
                    <div class="badge">UHD | 4K</div>
                    <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}">
                    <div class="p-4 bg-gradient-to-t from-black to-transparent">
                        <h3 class="font-black text-sm truncate uppercase tracking-tighter">${movie.title}</h3>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-[10px] text-zinc-500"><i class="fas fa-calendar-alt"></i> ${movie.release_date.split('-')[0]}</span>
                            <span class="text-[10px] gold-text font-bold">BY LAYALI ARAB</span>
                        </div>
                    </div>
                `;
                card.onclick = () => injectStream(movie.id, movie.title);
                grid.appendChild(card);
            });
        }

        function injectStream(id, title) {
            const overlay = document.getElementById('cinema-overlay');
            const container = document.getElementById('stream-container');
            
            // هاك الجلب: نستخدم خادم يجلب النسخة مع ترجمة عربية تلقائية
            const streamUrl = `https://vidsrc.to/embed/movie/${id}`; 
            
            overlay.style.display = 'block';
            container.innerHTML = `<iframe src="${streamUrl}" allowfullscreen></iframe>`;
            
            Swal.fire({
                toast: true, position: 'top', title: `سحب البث: ${title}`,
                showConfirmButton: false, timer: 4000, background: '#000', color: '#d4af37'
            });
        }

        function killStream() {
            document.getElementById('cinema-overlay').style.display = 'none';
            document.getElementById('stream-container').innerHTML = '';
        }

        // البحث الذكي
        document.getElementById('mainSearch').addEventListener('keypress', (e) => {
            if(e.key === 'Enter') fetchUHD('', e.target.value);
        });

        // تشغيل الجلب التلقائي عند التحميل
        fetchUHD();
    </script>
</body>
</html>
