<!DOCTYPE html>
<html id="masterApp" lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منظمة ليالي العرب | منصة فودو المتكاملة</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@200;500;900&display=swap');

        :root {
            --gold: #d4af37;
            --panel-bg: rgba(10, 10, 15, 0.9);
        }

        body, html {
            margin: 0; padding: 0; height: 100vh; width: 100vw;
            background: #000; font-family: 'Tajawal', sans-serif;
            overflow: hidden;
        }

        /* حاوية فودو الرئيسية */
        .vodu-frame-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
        }

        iframe {
            width: 100%; height: 100%; border: none;
            filter: brightness(0.9) contrast(1.1);
        }

        /* واجهة القيادة (Overlay) */
        .overlay-layer {
            position: absolute;
            inset: 0;
            z-index: 10;
            pointer-events: none; /* يسمح بالضغط على الفيلم تحتها */
        }

        .interactive { pointer-events: auto; }

        /* زر اللغة الجوهرة */
        .lang-gem {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 8px 15px;
            border-radius: 12px;
            font-weight: 900;
            cursor: pointer;
            z-index: 100;
            font-size: 12px;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }

        /* نظام الدردشة الهولوغرامي */
        .hologram-chat {
            position: fixed;
            bottom: 120px;
            left: 20px;
            width: 320px;
            max-height: 400px;
            background: var(--panel-bg);
            border-radius: 20px;
            border-left: 4px solid var(--gold);
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transition: 0.5s;
            transform: translateX(-110%);
        }

        .hologram-chat.open { transform: translateX(0); }

        /* أزرار التحكم السفلي (تظهر عند الحوم) */
        .dock-container {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            padding: 15px 30px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(15px);
            border-radius: 100px;
            border: 1px solid rgba(255,255,255,0.1);
            z-index: 100;
            opacity: 0.3;
            transition: 0.5s;
        }

        .dock-container:hover { opacity: 1; bottom: 40px; border-color: var(--gold); }

        .btn-circle {
            width: 50px; height: 50px;
            border-radius: 50%;
            background: #111;
            display: flex; items-center: center; justify-content: center;
            color: #fff; border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer; transition: 0.3s;
        }

        .btn-circle:hover { background: var(--gold); color: #000; transform: scale(1.1); }
        .btn-circle.active { background: #ff4757; color: #fff; }

        /* وجوه الأعضاء العائمة */
        .floating-faces {
            position: fixed;
            top: 100px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .face-orb {
            width: 45px; height: 45px;
            border-radius: 15px;
            border: 2px solid var(--gold);
            overflow: hidden;
            background: #000;
            transition: 0.3s;
        }

        .face-orb.talking {
            box-shadow: 0 0 20px var(--gold);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* شاشة التحميل الملكية */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; items-center: center; justify-content: center;
        }

        .loader-crown { font-size: 80px; color: var(--gold); animation: bounce 2s infinite; }
    </style>
</head>
<body>

    <div id="loader">
        <div class="loader-crown text-center">
            <i class="fas fa-crown"></i>
            <h1 class="text-2xl font-black mt-4 tracking-widest text-white">منظمة ليالي العرب</h1>
            <p class="text-gold text-[10px] mt-2 uppercase">جاري جلب سينما فودو...</p>
        </div>
    </div>

    <div class="lang-gem interactive" onclick="changeLang()">EN | AR</div>

    <div class="vodu-frame-container">
        <iframe id="voduIframe" src="https://movie.vodu.me/" allow="autoplay; fullscreen"></iframe>
    </div>

    <div class="overlay-layer">
        
        <div class="floating-faces interactive">
            <div class="face-orb talking" title="أنت (الآدمن)">
                <img src="https://ui-avatars.com/api/?name=Admin&background=d4af37&color=000">
            </div>
            <div class="face-orb opacity-40"><i class="fas fa-plus m-3 text-gray-500"></i></div>
        </div>

        <div id="chatBox" class="hologram-chat interactive">
            <div class="p-4 border-b border-white/10 flex justify-between">
                <span class="font-black text-gold">دردشة المنظمة</span>
                <i class="fas fa-ghost opacity-20"></i>
            </div>
            <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-3">
                <div class="text-[10px] text-gray-500 text-center uppercase tracking-widest">مرحباً بك في مجلس السينما</div>
            </div>
            <div class="p-3 bg-white/5">
                <input type="text" id="msgInp" onkeypress="handleChat(event)" placeholder="اكتب هنا..." class="w-full bg-black/50 border border-white/10 rounded-lg p-2 text-sm outline-none focus:border-gold">
            </div>
        </div>

        <div class="dock-container interactive">
            <div onclick="toggleMic()" id="micBtn" class="btn-circle" title="الميكروفون">
                <i class="fas fa-microphone"></i>
            </div>
            <div onclick="toggleChat()" class="btn-circle" title="فتح الدردشة">
                <i class="fas fa-comments"></i>
            </div>
            <div onclick="shareScreen()" class="btn-circle" title="مشاركة شاشة">
                <i class="fas fa-desktop"></i>
            </div>
            <div onclick="syncMovie()" class="btn-circle" title="مزامنة العرض">
                <i class="fas fa-sync-alt"></i>
            </div>
            <div onclick="location.reload()" class="btn-circle active" title="خروج">
                <i class="fas fa-power-off"></i>
            </div>
        </div>

    </div>

    <script>
        // إخفاء شاشة التحميل بعد ثوانٍ
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('loader').classList.add('animate__animated', 'animate__fadeOut');
                setTimeout(() => document.getElementById('loader').style.display = 'none', 1000);
                
                Swal.fire({
                    title: 'تم تفعيل سينما فودو',
                    text: 'يمكنك الآن مشاهدة الأفلام مع أعضاء المنظمة في مجلس واحد.',
                    icon: 'success',
                    background: '#0a0a0a',
                    color: '#d4af37',
                    confirmButtonText: 'دخول المجلس'
                });
            }, 3000);
        };

        // إدارة الدردشة
        function toggleChat() {
            document.getElementById('chatBox').classList.toggle('open');
        }

        function handleChat(e) {
            if(e.key === 'Enter') {
                const inp = document.getElementById('msgInp');
                if(!inp.value) return;
                
                const msgHtml = `
                    <div class="animate__animated animate__fadeInLeft">
                        <span class="text-[9px] font-black text-gold block">القائد</span>
                        <p class="bg-white/10 p-2 rounded-lg text-xs inline-block">${inp.value}</p>
                    </div>
                `;
                document.getElementById('messages').innerHTML += msgHtml;
                inp.value = '';
                const m = document.getElementById('messages');
                m.scrollTop = m.scrollHeight;
            }
        }

        // إدارة الصوت
        let micOn = false;
        function toggleMic() {
            micOn = !micOn;
            const btn = document.getElementById('micBtn');
            btn.classList.toggle('active', micOn);
            btn.innerHTML = `<i class="fas fa-microphone${micOn ? '' : '-slash'}"></i>`;
            
            if(micOn) {
                Swal.fire({ toast: true, position: 'top', title: 'الميكروفون مفعل الآن', background: '#d4af37', color: '#000', showConfirmButton: false, timer: 1500 });
            }
        }

        // مشاركة الشاشة
        async function shareScreen() {
            try {
                const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
                Swal.fire('تمت المشاركة', 'شاشتك تظهر الآن لبقية أعضاء المنظمة فوق الفيلم', 'success');
            } catch(e) {
                console.log("Cancelled");
            }
        }

        // مزامنة العرض
        function syncMovie() {
            Swal.fire({
                title: 'مزامنة جماعية',
                text: 'سيتم توقيت الفيلم عند الجميع في نفس اللحظة.. هل أنت متأكد؟',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d4af37',
                cancelButtonColor: '#d33',
                confirmButtonText: 'تأكيد المزامنة'
            });
        }

        function changeLang() {
            Swal.fire('Language', 'Language switched to English Protocol', 'info');
        }
    </script>
</body>
</html>
